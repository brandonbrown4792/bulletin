(this["webpackJsonpbulletin-frontend"]=this["webpackJsonpbulletin-frontend"]||[]).push([[0],{77:function(e,t,n){e.exports=n(98)},85:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(13),s=n.n(r),c=n(6),i=(n(85),n(9)),u=n(10),l=n(12),m=n(11),p=n(149),d=n(58),h=n(2),f=n(5),g=n(126),E=n(129),v=n(130),b=n(47),S=n(131),O=n(153),y=n(132),j="https://bulletin-app-api.herokuapp.com/api/v1",T=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={anchorEl:null,username:""},e.getUsername=function(){var t=localStorage.getItem("auth_token");if(t){var n={method:"POST",headers:{"Content-Type":"application/json","Auth-Token":t}};fetch("".concat(j,"/get-username"),n).then((function(e){return e.json()})).then((function(t){t.username&&e.setState(Object(h.a)(Object(h.a)({},e.state),{},{username:t.username}))}))}},e.handleLogout=function(){e.handleClose(),localStorage.removeItem("auth_token"),e.props.setLoggedIn(!1),e.props.history.push("/home"),e.props.history.go()},e.handleEditProfile=function(t){e.handleClose(),e.props.history.push("/update-profile")},e.handleLogin=function(t){e.handleClose(),e.props.history.push("/login")},e.handleSignup=function(){e.handleClose(),e.props.history.push("/signup")},e.handleClose=function(){e.setState({anchorEl:null})},e.handleMenu=function(t){e.setState({anchorEl:t.currentTarget})},e.renderMenuItems=function(){return localStorage.getItem("auth_token")?o.a.createElement("div",{className:"logged-in-menu"},o.a.createElement(g.a,{onClick:function(){return e.handleLogout(e.props)}},"Logout"),o.a.createElement(g.a,{onClick:function(){return e.handleEditProfile(e.props)}},"Update Profile")):[o.a.createElement(g.a,{key:"Log In",onClick:function(){return e.handleLogin(e.props)}},"Log In"),o.a.createElement(g.a,{key:"Sign Up",onClick:function(){return e.handleSignup(e.props)}},"Sign Up")]},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getUsername()}},{key:"render",value:function(){return o.a.createElement(E.a,{elevation:0,position:"sticky",style:{background:"transparent"}},o.a.createElement(v.a,null,o.a.createElement(b.a,{variant:"h3",style:{marginLeft:"9%",marginTop:"2%",flexGrow:1}},"Bulletin"),o.a.createElement(S.a,{style:{marginRight:"9%"},onClick:this.handleMenu,color:"inherit"},o.a.createElement(y.a,{style:{paddingRight:"10px"}}),o.a.createElement(b.a,null,this.state.username)),o.a.createElement(O.a,{id:"menu-appbar",anchorEl:this.state.anchorEl,open:Boolean(this.state.anchorEl),onClose:this.handleClose},this.renderMenuItems(this.props))))}}]),n}(o.a.Component),w=Object(f.g)(Object(c.b)(null,(function(e){return{setLoggedIn:function(t){return e({type:"SET_LOGGED_IN",loggedIn:t})}}}))(T)),C=n(133),N=n(101),_=n(138),k=n(134),I=n(137),P=n(135),A=n(136),R=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={interestsOpen:!1,newsSourcesOpen:!1},e.fetchInterestsAndNewsSources=function(){var t=localStorage.getItem("auth_token");if(t){var n={method:"GET",headers:{"Content-Type":"application/json","Auth-Token":t}};fetch("".concat(j,"/get-interests-and-news-sources"),n).then((function(e){return e.json()})).then((function(t){t.message||e.props.setInterestsAndNewsSources(t.interests,t.news_sources)}))}},e.handleInterestsClick=function(){e.setState({interestsOpen:!e.state.interestsOpen}),e.setState({newsSourcesOpen:!1})},e.handleNewsSourcesClick=function(){e.setState({newsSourcesOpen:!e.state.newsSourcesOpen}),e.setState({interestsOpen:!1})},e.mapInterests=function(){return e.props.interests.map((function(t){return o.a.createElement(N.a,{button:!0,key:t.name,style:{paddingLeft:"30px"},onClick:function(){e.props.history.push("/interests/".concat(e.slugify(t.name))),e.props.history.go()}},o.a.createElement(k.a,{primary:"".concat(t.name)}))}))},e.mapNewsSources=function(){return e.props.newsSources.map((function(t){return o.a.createElement(N.a,{button:!0,key:t.name,style:{paddingLeft:"30px"},onClick:function(){e.props.history.push("/news-sources/".concat(e.slugify(t.name))),e.props.history.go()}},o.a.createElement(k.a,{primary:"".concat(t.name)}))}))},e.slugify=function(e){return e.split(" ").join("-").toLowerCase()},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.fetchInterestsAndNewsSources()}},{key:"render",value:function(){return o.a.createElement(C.a,null,this.props.interests.length>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement(N.a,{button:!0,onClick:this.handleInterestsClick},o.a.createElement(k.a,{primary:"Interests"}),this.state.interestsOpen?o.a.createElement(P.a,null):o.a.createElement(A.a,null)),o.a.createElement(I.a,{in:this.state.interestsOpen,timeout:"auto",unmountOnExit:!0},o.a.createElement(C.a,{component:"div",disablePadding:!0},this.mapInterests()))),this.props.newsSources.length>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement(N.a,{button:!0,onClick:this.handleNewsSourcesClick},o.a.createElement(k.a,{primary:"News Sources"}),this.state.newsSourcesOpen?o.a.createElement(P.a,null):o.a.createElement(A.a,null)),o.a.createElement(I.a,{in:this.state.newsSourcesOpen,timeout:"auto",unmountOnExit:!0},o.a.createElement(C.a,{component:"div",disablePadding:!0},this.mapNewsSources()))))}}]),n}(o.a.Component),U=Object(f.g)(Object(c.b)((function(e){return{interests:e.menuReducer.interests,newsSources:e.menuReducer.newsSources}}),(function(e){return{setInterestsAndNewsSources:function(t,n){return e({type:"SET_INTERESTS_AND_NEWS_SOURCES",interests:t,newsSources:n})}}}))(R)),D=n(139),F=n(140),L=n(141),x=n(142),M=n(143),G=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).getBadgeCounts=function(){var t=localStorage.getItem("auth_token");if(t){var n={method:"GET",headers:{"Content-Type":"application/json","Auth-Token":t}};fetch("".concat(j,"/get-badges"),n).then((function(e){return e.json()})).then((function(t){t.message||e.props.getBadges(t.notifications,t.messages)}))}},e.handleClick=function(t){e.props.history.push("/".concat(t.target.textContent.toLowerCase()))},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getBadgeCounts()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"menu-container"},o.a.createElement(C.a,{className:"hidden-scroll",component:"nav",style:{position:"fixed",width:"20%",maxHeight:"80vh",overflowY:"scroll"}},o.a.createElement(N.a,{button:!0,onClick:function(t){return e.handleClick(t)}},o.a.createElement(_.a,null,o.a.createElement(D.a,{style:{color:"#FDFFFF"}})),o.a.createElement(k.a,{primary:"Home"})),o.a.createElement(N.a,{button:!0,onClick:function(t){return e.handleClick(t)}},o.a.createElement(_.a,null,o.a.createElement(F.a,{style:{color:"#FDFFFF"}})),o.a.createElement(k.a,{primary:"Tags"})),this.props.loggedIn&&o.a.createElement(o.a.Fragment,null,o.a.createElement(N.a,{button:!0,onClick:function(t){return e.handleClick(t)}},o.a.createElement(_.a,null,o.a.createElement(L.a,{style:{color:"#FDFFFF"}})),o.a.createElement(k.a,{primary:"Messages"}),this.props.messagesCount>0&&o.a.createElement("div",{className:"notification-badge"},this.props.messagesCount)),o.a.createElement(N.a,{button:!0,onClick:function(t){return e.handleClick(t)}},o.a.createElement(_.a,null,o.a.createElement(x.a,{style:{color:"#FDFFFF"}})),o.a.createElement(k.a,{primary:"Notifications"}),this.props.notificationsCount>0&&o.a.createElement("div",{className:"notification-badge"},this.props.notificationsCount)),o.a.createElement(N.a,{button:!0,onClick:function(t){return e.handleClick(t)}},o.a.createElement(_.a,null,o.a.createElement(M.a,{style:{color:"#FDFFFF"}})),o.a.createElement(k.a,{primary:"Profile"})),o.a.createElement("hr",null),o.a.createElement(U,null))))}}]),n}(o.a.Component),B=Object(f.g)(Object(c.b)((function(e){return{loggedIn:e.loggedInReducer.loggedIn,notificationsCount:e.badgesReducer.notifications,messagesCount:e.badgesReducer.messages}}),(function(e){return{getBadges:function(t,n){return e({type:"GET_BADGES",notifications:t,messages:n})}}}))(G)),W=Object(c.b)(null,(function(e){return{createNewPost:function(t){return e({type:"CREATE_NEW_POST",post:t})}}}))((function(e){return o.a.createElement("div",{className:"new-post-form-container"},o.a.createElement("form",{className:"bulletin-form",onSubmit:function(t){return function(e,t){e.preventDefault();var n=localStorage.getItem("auth_token");if(n){var a=e.target.content.value,o=a.split(" ").filter((function(e){return"#"===e[0]})).map((function(e){return e.slice(1).toLowerCase()}));if(a){var r={post:{content:a,tags:o}},s={method:"POST",headers:{"Content-Type":"application/json","Auth-Token":n},body:JSON.stringify(r)};fetch("".concat(j,"/posts"),s).then((function(e){return e.json()})).then((function(e){e.message?alert(e.message):t.createNewPost(e)})).catch((function(){return alert("Something went wrong")})),e.target.reset()}else alert("Post must contain content")}}(t,e)}},o.a.createElement("input",{type:"text",name:"content",placeholder:"Write a new post..."}),o.a.createElement("input",{type:"submit",value:"Post"})))})),J=n(29),q=function(e){var t=new Date(Date.parse(e)),n=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric"}).format(t),a=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(t);return"".concat(n," - ").concat(a)},V=Object(f.g)((function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"comment-user",onClick:function(){return e.history.push("/profile/".concat(e.comment.user.username))}},e.comment.user.username),o.a.createElement("div",{className:"comment-content"},e.comment.content),o.a.createElement("div",{className:"comment-date"},q(e.comment.created_at)))})),H=function(e){var t=e.comments;return o.a.createElement("div",{className:"comments-list"},t.length>0&&o.a.createElement(o.a.Fragment,null,function(e){return e.map((function(e){return o.a.createElement("div",{className:"comment",key:e.id},o.a.createElement(V,{comment:e}))}))}(t)))},X=function(e){return o.a.createElement("div",{className:"new-comment-form-container"},o.a.createElement("form",{className:"new-comment-form",onSubmit:function(t){return function(e,t){e.preventDefault();var n=localStorage.getItem("auth_token");if(!n)return alert("Must be logged in to write comment"),void e.target.reset();var a={comment:{content:e.target.content.value},post:t.post},o={method:"POST",headers:{"Content-Type":"application/json","Auth-Token":n},body:JSON.stringify(a)};fetch("".concat(j,"/comments"),o).then((function(e){return e.json()})).then((function(e){e.message?alert(e.message):t.updatePosts(e)})).catch((function(e){return alert("Something went wrong"+e)})),e.target.reset()}(t,e)}},o.a.createElement("div",{className:"comment-form"},o.a.createElement("input",{name:"content",placeholder:"Write a comment..."}))))},Y=Object(c.b)((function(e){return{loggedIn:e.loggedInReducer.loggedIn}}))((function(e){return o.a.createElement("div",{className:"comments-container"},o.a.createElement(H,{comments:e.post.comments}),e.loggedIn&&o.a.createElement(X,{post:e.post,updatePosts:e.updatePosts}))})),$=n(144),z=n(145),K=n(146),Q=n(147),Z=n(148),ee=n(152),te=Object(f.g)((function(e){return o.a.createElement("div",{className:"user-post"},o.a.createElement("div",{className:"user-post-content-container"},o.a.createElement("div",{className:"user-post-username",onClick:function(){return e.history.push("/profile/".concat(e.post.user.username))}},e.post.user.username),o.a.createElement("div",{className:"post-date"},q(e.post.created_at)),o.a.createElement("div",{className:"user-post-content"},e.post.content)),!e.isSharedPost&&o.a.createElement(ae,{post:e.post,updatePosts:e.updatePosts}))})),ne=Object(c.b)(null,(function(e){return{createNewPost:function(t){return e({type:"CREATE_NEW_POST",post:t})}}}))((function(e){return o.a.createElement(ee.a,{open:e.open,onClose:e.handleClose},o.a.createElement("div",{className:"bulletin-modal"},o.a.createElement("form",{className:"bulletin-form-tertiary",onSubmit:function(t){return function(e,t){e.preventDefault();var n=localStorage.getItem("auth_token");if(n){var a=e.target.content.value,o=a.split(" ").filter((function(e){return"#"===e[0]})).map((function(e){return e.slice(1).toLowerCase()})),r={shared_post:{content:a,tags:o,shared_post:t.post}},s={method:"POST",headers:{"Content-Type":"application/json","Auth-Token":n},body:JSON.stringify(r)};fetch("".concat(j,"/create-shared-post"),s).then((function(e){return e.json()})).then((function(e){e.message?alert(e.message):(t.createNewPost(e),t.handleClose())}))}else alert("Must be logged in to share a post")}(t,e)}},o.a.createElement("input",{type:"text",name:"content",placeholder:"Write about this post..."}),o.a.createElement("input",{className:"share-post-button",type:"submit",value:"Share"})),function(e){return e.post.is_news_story?o.a.createElement(oe,{post:e.post,isSharedPost:!0,updatePosts:e.updatePosts}):o.a.createElement(te,{post:e.post,isSharedPost:!0,updatePosts:e.updatePosts})}(e)))})),ae=function(e){var t=Object(a.useState)(!1),n=Object(J.a)(t,2),r=n[0],s=n[1],c=Object(a.useState)(!1),i=Object(J.a)(c,2),u=i[0],l=i[1];return o.a.createElement("div",{className:"post-footer"},o.a.createElement($.a,{style:{color:"#8798A5"},onClick:function(){return function(e){var t=localStorage.getItem("auth_token");if(t){var n={post:e.post},a={method:"POST",headers:{"Content-Type":"application/json","Auth-Token":t},body:JSON.stringify(n)};fetch("".concat(j,"/likes"),a).then((function(e){return e.json()})).then((function(t){t.message?alert(t.message):e.updatePosts(t)})).catch((function(e){return alert("Something went wrong "+e)}))}else alert("Must be logged in to like post")}(e)}},o.a.createElement(z.a,{className:"post-icon"},o.a.createElement(K.a,null))),o.a.createElement("span",{className:"post-count"},e.post.likes_count),o.a.createElement($.a,{style:{color:"#8798A5"},onClick:function(){return s(!r)}},o.a.createElement(z.a,{className:"post-icon"},o.a.createElement(Q.a,null))),o.a.createElement("span",null,e.post.comments.length),o.a.createElement($.a,{style:{color:"#8798A5",float:"right"},onClick:function(){return l(!0)}},o.a.createElement(z.a,{className:"post-icon"},o.a.createElement(Z.a,null))),o.a.createElement(Y,{post:e.post,updatePosts:e.updatePosts}),u&&o.a.createElement(ne,{open:u,handleClose:function(){return l(!1)},post:e.post,updatePosts:e.updatePosts}))},oe=function(e){return o.a.createElement("div",{className:"news-story-post"},o.a.createElement("div",{className:"news-story-content-container",onClick:function(){return window.open(e.post.news_url,"_blank")}},o.a.createElement("div",{className:"news-story-header"},o.a.createElement("div",{className:"news-story-source"},e.post.news_source),o.a.createElement("div",{className:"post-date"},q(e.post.created_at))),o.a.createElement("div",{className:"post-title"},e.post.news_title.split(" - ")[0]),e.post.news_image&&o.a.createElement("img",{className:"news-story-img",src:e.post.news_image,alt:"news-story"}),o.a.createElement("div",{className:"post-content"},e.post.content),e.post.news_author&&o.a.createElement("div",{className:"news-story-author"},"Written By: ",e.post.news_author)),!e.isSharedPost&&o.a.createElement(ae,{post:e.post,updatePosts:e.updatePosts}))},re=Object(f.g)((function(e){return o.a.createElement("div",{className:"user-post"},o.a.createElement("div",{className:"user-post-content-container"},o.a.createElement("div",{className:"user-post-username",onClick:function(){return e.history.push("/profile/".concat(e.post.user.username))}},e.post.user.username),o.a.createElement("span",{className:"user-post-shared"},"shared..."),o.a.createElement("div",{className:"post-date"},q(e.post.created_at)),o.a.createElement("div",{className:"user-post-content"},e.post.content)),o.a.createElement("div",{className:"shared-post-container"},function(e){return e.post.shared_post.is_news_story?o.a.createElement(oe,{post:e.post.shared_post,isSharedPost:!0,updatePosts:e.updatePosts}):o.a.createElement(te,{post:e.post.shared_post,isSharedPost:!0,updatePosts:e.updatePosts})}(e)),o.a.createElement(ae,{post:e.post,updatePosts:e.updatePosts}))})),se=function(e){return o.a.createElement(o.a.Fragment,null,function(e){return e.post.shared_post?o.a.createElement(re,{post:e.post,updatePosts:e.updatePosts}):o.a.createElement(te,{post:e.post,updatePosts:e.updatePosts})}(e))},ce=function(e){return o.a.createElement(o.a.Fragment,null,e.posts&&function(e){return e.posts.map((function(t,n){return t.is_news_story?o.a.createElement(oe,{post:t,key:n,updatePosts:e.updatePosts}):o.a.createElement(se,{post:t,key:n,updatePosts:e.updatePosts})}))}(e))},ie=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).fetchPosts=function(){var t=localStorage.getItem("auth_token"),n={method:"GET",headers:{"Content-Type":"application/json"}};t&&(n=Object(h.a)(Object(h.a)({},n),{},{headers:Object(h.a)(Object(h.a)({},n.headers),{},{"Auth-Token":t})})),fetch("".concat(j,"/posts"),n).then((function(e){return e.json()})).then((function(t){e.props.getPosts(t)}))},e.handleScroll=function(){var e=document.body.scrollTop||document.documentElement.scrollTop,t=document.querySelector(".back-to-top-button");t.style.display=e>500?"block":"none"},e.scrollToTop=function(){document.body.scrollTop=0,document.documentElement.scrollTop=0},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.fetchPosts(),window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"back-to-top-button",onClick:this.scrollToTop},"Back to Top"),this.props.isLoggedIn&&o.a.createElement(W,null),o.a.createElement(ce,{posts:this.props.posts,updatePosts:this.props.updatePosts}))}}]),n}(o.a.Component),ue=Object(c.b)((function(e){return{isLoggedIn:e.loggedInReducer.loggedIn,posts:e.postsReducer.posts}}),(function(e){return{getPosts:function(t){return e({type:"GET_POSTS",posts:t})},updatePosts:function(t){return e({type:"UPDATE_POSTS",post:t})}}}))(ie),le=Object(c.b)(null,(function(e){return{getPosts:function(t){return e({type:"GET_POSTS",posts:t})}}}))((function(e){return o.a.createElement("div",{className:"search-tag-form-container"},o.a.createElement("form",{className:"bulletin-form",onSubmit:function(t){return function(e,t){e.preventDefault();var n=localStorage.getItem("auth_token"),a={tags:{names:e.target.tags.value.split(" ").map((function(e){return"#"===e[0]?e.slice(1).toLowerCase():e.toLowerCase()}))}},o={method:"POST",headers:{"Content-Type":"application/json","Auth-Token":n},body:JSON.stringify(a)};fetch("".concat(j,"/get-posts-by-tag"),o).then((function(e){return e.json()})).then((function(e){e.message?alert(e.message):t.getPosts(e)}))}(t,e)}},o.a.createElement("input",{type:"text",name:"tags",placeholder:"Search a tag..."}),o.a.createElement("input",{type:"submit",value:"Search"})))})),me=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleScroll=function(){var e=document.body.scrollTop||document.documentElement.scrollTop,t=document.querySelector(".back-to-top-button");t.style.display=e>500?"block":"none"},e.scrollToTop=function(){document.body.scrollTop=0,document.documentElement.scrollTop=0},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.getPosts([]),window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"back-to-top-button",onClick:this.scrollToTop},"Back to Top"),o.a.createElement(le,null),o.a.createElement(ce,{posts:this.props.posts,updatePosts:this.props.updatePosts}))}}]),n}(o.a.Component),pe=Object(c.b)((function(e){return{posts:e.postsReducer.posts}}),(function(e){return{getPosts:function(t){return e({type:"GET_POSTS",posts:t})},updatePosts:function(t){return e({type:"UPDATE_POSTS",post:t})}}}))(me),de=function(e){return o.a.createElement("div",{className:"conversation-container",onClick:function(){return e.loadConversation(e.conversation,e.username,e.openConversation,e.setOpenConversation)},style:{cursor:"pointer"}},e.conversation.unread_messages_count>0&&o.a.createElement("div",{className:"message-notification-badge"},e.conversation.unread_messages_count),o.a.createElement("div",{className:"conversation-participants"},e.conversation.participants.map((function(e){return e.user.username})).join(", ")),o.a.createElement("div",{className:"conversation-last-message"},function(e){if(e.length>0){var t=e[e.length-1];return"".concat(t.user.username,": ").concat(t.content)}return""}(e.conversation.messages)))},he=function(e){return o.a.createElement(o.a.Fragment,null,e.conversations.length>0?o.a.createElement(o.a.Fragment,null,function(e){return e.conversations.map((function(t){return o.a.createElement(de,{key:t.id,conversation:t,loadConversation:e.loadConversation,username:e.username,openConversation:e.openConversation,setOpenConversation:e.setOpenConversation})}))}(e)):o.a.createElement("div",{className:"no-notifications-messages"},"Looks like you don't have any messages"))},fe=n(17),ge=function(e,t,n,a){a([].concat(Object(fe.a)(n),[e.target.textContent])),t([])},Ee=Object(c.b)(null,(function(e){return{addConversation:function(t){return e({type:"ADD_CONVERSATION",conversation:t})}}}))((function(e){var t=Object(a.useState)([]),n=Object(J.a)(t,2),r=n[0],s=n[1],c=Object(a.useState)([]),i=Object(J.a)(c,2),u=i[0],l=i[1];return o.a.createElement("div",{className:"new-conversation-form"},o.a.createElement("div",{className:"new-conversation-search-user-container"},o.a.createElement("form",{className:"bulletin-form-secondary",onSubmit:function(e){return function(e,t){e.preventDefault();var n={user:{username:e.target.username.value}},a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};fetch("".concat(j,"/search-users"),a).then((function(e){return e.json()})).then((function(e){t(e.map((function(e){return e.username})))})).catch((function(){return"Something went wrong"})),e.target.reset()}(e,l)}},o.a.createElement("input",{type:"text",name:"username",placeholder:"Search to add a user to the conversation..."}),o.a.createElement("input",{type:"submit",value:"Search"})),o.a.createElement(C.a,null,function(e,t,n,a){return e.map((function(e){return o.a.createElement(N.a,{button:!0,name:"username",key:e,onClick:function(e){return ge(e,t,n,a)}},o.a.createElement(k.a,{primary:e}))}))}(u,l,r,s))),r.length>0&&o.a.createElement("div",{className:"new-participants-container"},o.a.createElement("div",{className:"new-participants-title"},"Participants"),o.a.createElement("div",{className:"new-participants"},r.join(", "))),o.a.createElement("form",{className:"start-conversation-form",onSubmit:function(t){return function(e,t,n){e.preventDefault();var a=localStorage.getItem("auth_token");if(a){var o={conversation:{participant_usernames:t}},r={method:"POST",headers:{"Content-Type":"application/json","Auth-Token":a},body:JSON.stringify(o)};fetch("".concat(j,"/conversations"),r).then((function(e){return e.json()})).then((function(e){e.message?alert(e.message):(n.addConversation(e),n.loadConversation(e,n.username,n.openConversation,n.setOpenConversation),n.setNewConversationDrawer(!1))})).catch((function(e){return alert("Something went wrong - ".concat(e))}))}else alert("Must be logged in to start conversation")}(t,r,e)}},o.a.createElement("input",{className:"start-conversation-button",type:"submit",value:"Start conversation"})))})),ve=function(e){var t=Object(a.useState)(!1),n=Object(J.a)(t,2),r=n[0],s=n[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"new-conversation-button",onClick:function(){return s(!r)}},"Start a new conversation"),r&&o.a.createElement(Ee,{loadConversation:e.loadConversation,username:e.username,openConversation:e.openConversation,setOpenConversation:e.setOpenConversation,setNewConversationDrawer:s}))},be=n(35),Se=(n(97),function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).fetchConversations=function(){var t=localStorage.getItem("auth_token");if(t){var n={method:"GET",headers:{"Content-Type":"application/json","Auth-Token":t}};fetch("".concat(j,"/conversations"),n).then((function(e){return e.json()})).then((function(t){t.message?alert(t.message):e.props.getConversations(t.username,t.conversations)})).catch((function(e){return alert("Something went wrong "+e)}))}else alert("Must be logged in to see conversations")},e.loadConversation=function(t,n,a,o){Object(be.deleteMessages)(),t.messages.forEach((function(e){e.user.username===n?Object(be.addUserMessage)(e.content):t.participants.length>2?Object(be.addResponseMessage)("".concat(e.user.username," --- ").concat(e.content)):Object(be.addResponseMessage)(e.content)})),Object(be.markAllAsRead)(),e.setMessagesRead(t),a||Object(be.toggleWidget)(),o(t)},e.setMessagesRead=function(t){var n=localStorage.getItem("auth_token");if(n){var a={method:"POST",headers:{"Content-Type":"application/json","Auth-Token":n}};fetch("".concat(j,"/conversations/").concat(t.id,"/set-messages-read"),a).then((function(e){return e.json()})).then((function(n){n.message||(e.props.udpateConversation(n),e.props.setMessagesBadgeCount(e.props.messagesCount-t.unread_messages_count))}))}else alert("Must be logged in to update messages")},e.getCustomLauncher=function(t,n,a){return n&&o.a.createElement("button",{className:"close-chat-button",onClick:function(){return e.handleChatClose(t,a)}},"Close Chat")},e.handleChatClose=function(e,t){e(),t(null)},e.handleNewUserMessage=function(t){var n=localStorage.getItem("auth_token");if(n){var a={message:{content:t,conversation_id:e.props.openConversation.id}},o={method:"POST",headers:{"Content-Type":"application/json","Auth-Token":n},body:JSON.stringify(a)};fetch("".concat(j,"/messages"),o).then((function(e){return e.json()})).then((function(t){t.message?alert(t.message):e.props.addMessageToConversation(t,e.props.openConversation.id)})).catch((function(e){return alert("Something went wrong "+e)}))}else alert("Must be logged in to send messages")},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.fetchConversations()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"conversations-container"},o.a.createElement(he,{conversations:this.props.conversations,loadConversation:this.loadConversation,username:this.props.username,openConversation:this.props.openConversation,setOpenConversation:this.props.setOpenConversation}),o.a.createElement(ve,{loadConversation:this.loadConversation,username:this.props.username,openConversation:this.props.openConversation,setOpenConversation:this.props.setOpenConversation}),o.a.createElement("div",{className:"widget-container"},o.a.createElement(be.Widget,{title:"Bulletin Chat",subtitle:"",handleNewUserMessage:this.handleNewUserMessage,showCloseButton:!0,showTimeStamp:!1,launcher:function(t){return e.getCustomLauncher(t,e.props.openConversation,e.props.setOpenConversation)},senderPlaceHolder:"Send a message..."})))}}]),n}(o.a.Component)),Oe=Object(c.b)((function(e){return{username:e.conversationsReducer.username,conversations:e.conversationsReducer.conversations,openConversation:e.conversationsReducer.openConversation,messagesCount:e.badgesReducer.messages}}),(function(e){return{getConversations:function(t,n){return e({type:"GET_CONVERSATIONS",username:t,conversations:n})},setOpenConversation:function(t){return e({type:"SET_OPEN_CONVERSATION",conversation:t})},addMessageToConversation:function(t,n){return e({type:"ADD_MESSAGE_TO_CONVERSATION",message:t,conversationId:n})},udpateConversation:function(t){return e({type:"UPDATE_CONVERSATION",conversation:t})},setMessagesBadgeCount:function(t){return e({type:"SET_MESSAGES_BADGE_COUNT",messagesCount:t})}}}))(Se),ye=function(e){var t=e.content,n=e.created_at;e.notification_type;return o.a.createElement("div",{className:"notification-container"},o.a.createElement("div",{className:"notification-date"},q(n)),o.a.createElement("div",{className:"notification-content"},t))},je=Object(c.b)(null,(function(e){return{deleteNotification:function(t){return e({type:"DELETE_NOTIFICATION",notification_content:t})}}}))((function(e){return o.a.createElement("div",{className:"notification-container"},o.a.createElement("div",{className:"notification-date"},q(e.created_at)),o.a.createElement("div",{className:"notification-content"},e.content),o.a.createElement("button",{className:"follow-accept-button",onClick:function(){return function(e){var t=localStorage.getItem("auth_token");if(t){var n={follow_request:{follower:e.content.split(" ")[0]}},a={method:"POST",headers:{"Content-Type":"application/json","Auth-Token":t},body:JSON.stringify(n)};fetch("".concat(j,"/accept-follow-request"),a).then((function(e){return e.json()})).then((function(t){t.message?alert(t.message):e.deleteNotification(t.notification_content)}))}else alert("Must be logged in to accept follow request")}(e)}},"Accept"),o.a.createElement("button",{className:"follow-deny-button",onClick:function(){return function(e){var t=localStorage.getItem("auth_token");if(t){var n={follow_request:{follower:e.content.split(" ")[0]}},a={method:"POST",headers:{"Content-Type":"application/json","Auth-Token":t},body:JSON.stringify(n)};fetch("".concat(j,"/deny-follow-request"),a).then((function(e){return e.json()})).then((function(t){t.message?alert(t.message):e.deleteNotification(t.notification_content)}))}else alert("Must be logged in to deny follow request")}(e)}},"Deny"))})),Te=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).fetchNotifications=function(){var t=localStorage.getItem("auth_token");if(t){var n={method:"GET",headers:{"Content-Type":"application/json","Auth-Token":t}};fetch("".concat(j,"/notifications"),n).then((function(e){return e.json()})).then((function(t){t.message?alert(t.message):(e.props.getNotifications(t),e.props.setNotificationsRead())})).catch((function(){return"Something went wrong"}))}else alert("Must be signed in to see notifications")},e.mapNotifications=function(){return e.props.notifications.map((function(e){switch(e.notification_type){case"general":return o.a.createElement(ye,{key:e.id,content:e.content,created_at:e.created_at,id:e.id,notification_type:e.notification_type});case"follow request":return o.a.createElement(je,{key:e.id,content:e.content,created_at:e.created_at,id:e.id,notification_type:e.notification_type});default:return o.a.createElement(ye,{key:e.id,content:e.content,created_at:e.created_at,id:e.id,notification_type:e.notification_type})}}))},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.fetchNotifications()}},{key:"render",value:function(){return o.a.createElement("div",{className:"notifications-container"},this.props.notifications.length>0?o.a.createElement(o.a.Fragment,null,this.mapNotifications()):o.a.createElement("div",{className:"no-notifications-messages"},"Looks like you don't have any notifications"))}}]),n}(o.a.Component),we=Object(c.b)((function(e){return{notifications:e.notificationsReducer.notifications}}),(function(e){return{getNotifications:function(t){return e({type:"GET_NOTIFICATIONS",notifications:t})},setNotificationsRead:function(){return e({type:"SET_NOTIFICATIONS_READ"})}}}))(Te),Ce=Object(f.g)((function(e){return o.a.createElement(o.a.Fragment,null,function(e){var t=localStorage.getItem("auth_token");t||e.push("/home");var n={method:"POST",headers:{"Content-Type":"application/json","Auth-Token":t}};return fetch("".concat(j,"/get-username"),n).then((function(e){return e.json()})).then((function(t){t.username?e.push("/profile/".concat(t.username)):e.push("/home")})),o.a.createElement(o.a.Fragment,null)}(e.history))})),Ne=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={username:""},e.getUsername=function(){var t=localStorage.getItem("auth_token");if(t){var n={method:"POST",headers:{"Content-Type":"application/json","Auth-Token":t}};fetch("".concat(j,"/get-username"),n).then((function(e){return e.json()})).then((function(t){t.username&&e.setState(Object(h.a)(Object(h.a)({},e.state),{},{username:t.username}))}))}},e.handleFollowRequest=function(){var t=localStorage.getItem("auth_token");if(t){var n={follow_request:{followed:e.props.match.params.username}},a={method:"POST",headers:{"Content-Type":"application/json","Auth-Token":t},body:JSON.stringify(n)};fetch("".concat(j,"/follow_requests"),a).then((function(e){return e.json()})).then((function(t){t.message?alert(t.message):e.props.updateFollow(t.result)})).catch((function(e){return alert("Something went wrong")}))}},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getUsername()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"user-header"},o.a.createElement("div",{className:"user-header-username"},this.props.user.username),o.a.createElement("div",{className:"user-header-info"},o.a.createElement(p.a,{container:!0},o.a.createElement(p.a,{item:!0,xs:6},o.a.createElement("div",{className:"user-header-bio"},"Bio: ",this.props.user.bio),o.a.createElement("div",{className:"user-header-member-since"},"Member since: ",q(this.props.user.created_at).split(" - ")[1])),o.a.createElement(p.a,{item:!0,xs:6},o.a.createElement("div",{className:"user-header-count"},"Posts: ",this.props.user.posts_count),o.a.createElement("div",{className:"user-header-count"},"Following: ",this.props.user.followers_count),o.a.createElement("div",{className:"user-header-count"},"Followers: ",this.props.user.following_count)))),this.state.username!==this.props.match.params.username&&this.props.loggedIn&&o.a.createElement("button",{className:"follow-button",onClick:function(){return e.handleFollowRequest()}},this.props.following))}}]),n}(o.a.Component),_e=Object(f.g)(Object(c.b)((function(e){return{loggedIn:e.loggedInReducer.loggedIn,following:e.userReducer.user.following}}),(function(e){return{updateFollow:function(t){return e({type:"UPDATE_FOLLOW",following:t})}}}))(Ne)),ke=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).getUserInfo=function(){var t={method:"GET",headers:{"Content-Type":"application/json","Auth-Token":localStorage.getItem("auth_token")}};fetch("".concat(j,"/users/").concat(e.props.match.params.username),t).then((function(e){return e.json()})).then((function(t){t.message?console.log(t.message):e.props.getUser(t)}))},e.renderUser=function(){var t=Object.keys(e.props.user).length>0;return o.a.createElement(o.a.Fragment,null,t&&o.a.createElement(o.a.Fragment,null,o.a.createElement(_e,{user:e.props.user}),o.a.createElement(ce,{posts:e.props.user.posts,updatePosts:e.props.updatePosts})))},e.handleScroll=function(){var e=document.body.scrollTop||document.documentElement.scrollTop,t=document.querySelector(".back-to-top-button");t.style.display=e>500?"block":"none"},e.scrollToTop=function(){document.body.scrollTop=0,document.documentElement.scrollTop=0},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getUserInfo(),window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"back-to-top-button",onClick:this.scrollToTop},"Back to Top"),this.renderUser())}}]),n}(o.a.Component),Ie=Object(c.b)((function(e){return{user:e.userReducer.user}}),(function(e){return{getUser:function(t){return e({type:"GET_USER",user:t})},updatePosts:function(t){return e({type:"UPDATE_USER_POSTS",post:t})}}}))(Object(f.g)(ke)),Pe=Object(f.g)(Object(c.b)(null,(function(e){return{setLoggedIn:function(t){return e({type:"SET_LOGGED_IN",loggedIn:t})}}}))((function(e){return o.a.createElement("div",{className:"account-form-container"},o.a.createElement("h2",null,"Login"),o.a.createElement("form",{className:"account-form",onSubmit:function(t){return function(e,t){e.preventDefault();var n={user:{username_email:e.target.username_email.value,password:e.target.password.value}};e.target.reset();var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};fetch("".concat(j,"/login"),a).then((function(e){return e.json()})).then((function(e){e.token?(localStorage.setItem("auth_token",e.token),t.setLoggedIn(!0),t.history.push("/home"),t.history.go()):(localStorage.removeItem("auth_token"),t.setLoggedIn(!1),alert(e.message))})).catch((function(){localStorage.removeItem("auth_token"),t.setLoggedIn(!1),alert("Something went wrong")}))}(t,e)}},o.a.createElement("div",{className:"account-label"},"Username / Email:"),o.a.createElement("input",{type:"text",name:"username_email"}),o.a.createElement("div",{className:"account-label"},"Password:"),o.a.createElement("input",{type:"password",name:"password",autoComplete:"on"}),o.a.createElement("input",{type:"submit",value:"Login"})))}))),Ae=n(150),Re=n(151),Ue=Object(c.b)(null,(function(e){return{setLoggedIn:function(t){return e({type:"SET_LOGGED_IN",loggedIn:t})}}}))((function(e){return o.a.createElement("div",{className:"account-form-container"},o.a.createElement("h2",null,"Signup"),o.a.createElement("form",{className:"account-form",onSubmit:function(t){return function(e,t){e.preventDefault();var n={user:{email:e.target.email.value,username:e.target.username.value,bio:e.target.bio.value,password:e.target.password.value,password_confirmation:e.target.passwordConfirmation.value,is_private:e.target.isPrivate.checked}};e.target.reset();var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};fetch("".concat(j,"/signup"),a).then((function(e){return e.json()})).then((function(e){e.token?(localStorage.setItem("auth_token",e.token),t.setLoggedIn(!0),t.setPickInterestsSources(!t.pickInterestsSources)):(localStorage.removeItem("auth_token"),t.setLoggedIn(!1),alert(e.message))})).catch((function(){localStorage.removeItem("auth_token"),t.setLoggedIn(!1),alert("Something went wrong")}))}(t,e)}},o.a.createElement("div",{className:"account-label"},"Email:"),o.a.createElement("input",{type:"text",name:"email"}),o.a.createElement("div",{className:"account-label"},"Username:"),o.a.createElement("input",{type:"text",name:"username"}),o.a.createElement("div",{className:"account-label"},"Bio:"),o.a.createElement("input",{type:"text",name:"bio"}),o.a.createElement("div",{className:"account-label"},"Password:"),o.a.createElement("input",{type:"password",name:"password",autoComplete:"on"}),o.a.createElement("div",{className:"account-label"},"Password Confirmation:"),o.a.createElement("input",{type:"password",name:"passwordConfirmation",autoComplete:"on"}),o.a.createElement(Ae.a,{control:o.a.createElement(Re.a,{style:{color:"#3d6081"},name:"isPrivate",color:"primary"}),label:"Private Account"}),o.a.createElement("input",{type:"submit",value:"Submit"})))})),De=function(e){return o.a.createElement(p.a,{item:!0},o.a.createElement("div",{onClick:function(){return e.handleSourceChange(e.source.id)}},o.a.createElement("img",{style:e.checked?{boxShadow:"inset 0px 0px 0px 5px #3d6081"}:{border:"none"},className:"signup-source-interest-image",src:"/News Source Logos/".concat(e.source.name,".jpg"),alt:"source"}),o.a.createElement("div",{className:"signup-source-interest-label"},e.source.name)))},Fe=function(e){return o.a.createElement(p.a,{item:!0},o.a.createElement("div",{onClick:function(){return e.handleInterestChange(e.interest.id)}},o.a.createElement("img",{style:e.checked?{boxShadow:"inset 0px 0px 0px 5px #3d6081"}:{border:"none"},className:"signup-source-interest-image",src:"/Interest Icons/".concat(e.interest.name,".jpg"),alt:"interest"}),o.a.createElement("div",{className:"signup-source-interest-label"},e.interest.name)))},Le=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).fetchedNewsSources=!1,e.fetchedInterests=!1,e.fetchSources=function(){fetch("".concat(j,"/news_sources")).then((function(e){return e.json()})).then((function(t){return e.props.setSources(t)})).catch((function(){return alert("Something went wrong")}))},e.fetchInterests=function(){fetch("".concat(j,"/interests")).then((function(e){return e.json()})).then((function(t){return e.props.setInterests(t)})).catch((function(){return alert("Something went wrong")}))},e.fetchUserInterestsAndNewsSources=function(){var t=localStorage.getItem("auth_token");if(t){var n={method:"GET",headers:{"Content-Type":"application/json","Auth-Token":t}};fetch("".concat(j,"/get-interests-and-news-sources"),n).then((function(e){return e.json()})).then((function(t){t.message||(t.interests.forEach((function(t){e.props.addInterest(t.id)})),t.news_sources.forEach((function(t){e.props.addSource(t.id)})))}))}},e.mapSources=function(){return e.props.sources.map((function(t){return o.a.createElement(De,{key:t.id,source:t,handleSourceChange:e.handleSourceChange,checked:e.props.selectedSources.includes(t.id)})}))},e.mapInterests=function(){return e.props.interests.map((function(t){return o.a.createElement(Fe,{key:t.id,interest:t,handleInterestChange:e.handleInterestChange,checked:e.props.selectedInterests.includes(t.id)})}))},e.handleSourceChange=function(t){e.props.selectedSources.includes(t)?e.props.removeSource(t):e.props.addSource(t)},e.handleInterestChange=function(t){e.props.selectedInterests.includes(t)?e.props.removeInterest(t):e.props.addInterest(t)},e.handleSubmit=function(t){t.preventDefault();var n=localStorage.getItem("auth_token");n?(e.submitSources(n),e.submitInterests(n)):alert("Must be logged in to edit sources/interests")},e.submitSources=function(t){var n={source:{ids:e.props.selectedSources}},a={method:"POST",headers:{"Content-Type":"application/json","Auth-Token":t},body:JSON.stringify(n)};fetch("".concat(j,"/user_news_sources"),a).then((function(e){return e.json()})).then((function(t){t.message?alert(t.message):(e.fetchedNewsSources=!0,e.waitFetch())}))},e.submitInterests=function(t){var n={interest:{ids:e.props.selectedInterests}},a={method:"POST",headers:{"Content-Type":"application/json","Auth-Token":t},body:JSON.stringify(n)};fetch("".concat(j,"/user_interests"),a).then((function(e){return e.json()})).then((function(t){t.message?alert(t.message):(e.fetchedInterests=!0,e.waitFetch())}))},e.waitFetch=function(){e.fetchedNewsSources&&e.fetchedNewsSources&&(e.props.history.push("/home"),e.props.history.go())},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.fetchSources(),this.fetchInterests(),this.fetchUserInterestsAndNewsSources()}},{key:"render",value:function(){var e=this;return o.a.createElement("form",{className:"signup-sources-interests-form",onSubmit:function(t){return e.handleSubmit(t,e.props)}},o.a.createElement("div",{className:"signup-sources-interests-submit-container"},o.a.createElement("input",{className:"signup-sources-interests-submit",type:"submit",value:"Update Sources and Interests"})),o.a.createElement("div",{className:"signup-sources-interests-label"},"Sources"),o.a.createElement("div",{className:"signup-interest-source-grid-container"},o.a.createElement(p.a,{container:!0,className:"hidden-scroll",style:{maxHeight:"600px",overflowY:"scroll"},justify:"center"},this.mapSources())),o.a.createElement("div",{className:"signup-sources-interests-label"},"Interests"),o.a.createElement("div",{className:"signup-interest-source-grid-container"},o.a.createElement(p.a,{container:!0,className:"hidden-scroll",style:{maxHeight:"600px",overflowY:"scroll"},justify:"center"},this.mapInterests())))}}]),n}(o.a.Component),xe=Object(f.g)(Object(c.b)((function(e){return{sources:e.signupReducer.sources,interests:e.signupReducer.interests,selectedSources:e.signupReducer.selectedSources,selectedInterests:e.signupReducer.selectedInterests}}),(function(e){return{setSources:function(t){return e({type:"SET_SOURCES",sources:t})},setInterests:function(t){return e({type:"SET_INTERESTS",interests:t})},addSource:function(t){return e({type:"ADD_SOURCE",source:t})},removeSource:function(t){return e({type:"REMOVE_SOURCE",source:t})},addInterest:function(t){return e({type:"ADD_INTEREST",interest:t})},removeInterest:function(t){return e({type:"REMOVE_INTEREST",interest:t})}}}))(Le)),Me=function(){var e=Object(a.useState)(!1),t=Object(J.a)(e,2),n=t[0],r=t[1];return o.a.createElement(o.a.Fragment,null,!n&&o.a.createElement(Ue,{pickInterestsSources:n,setPickInterestsSources:r}),n&&o.a.createElement(xe,{pickInterestsSources:n,setPickInterestsSources:r}))},Ge=n(49),Be=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={username:"",bio:""},e.getUsername=function(){var t=localStorage.getItem("auth_token");if(t){var n={method:"POST",headers:{"Content-Type":"application/json","Auth-Token":t}};fetch("".concat(j,"/get-username"),n).then((function(e){return e.json()})).then((function(t){t.username&&e.getUserInfo(t.username)}))}},e.getUserInfo=function(t){var n={method:"GET",headers:{"Content-Type":"application/json","Auth-Token":localStorage.getItem("auth_token")}};fetch("".concat(j,"/users/").concat(t),n).then((function(e){return e.json()})).then((function(t){t.message||e.setState(Object(h.a)(Object(h.a)({},e.state),{},{username:t.username,bio:t.bio}))}))},e.handleChange=function(t){e.setState(Object(h.a)(Object(h.a)({},e.state),{},Object(Ge.a)({},t.target.name,t.target.value)))},e.handleSubmit=function(t){t.preventDefault();var n=localStorage.getItem("auth_token");if(n){var a={user:{username:t.target.username.value,bio:t.target.bio.value}},o={method:"POST",headers:{"Content-Type":"application/json","Auth-Token":n},body:JSON.stringify(a)};fetch("".concat(j,"/update-user"),o).then((function(e){return e.json()})).then((function(t){t.message?alert(t.message):(e.props.history.push("/home"),e.props.history.go())}))}else alert("Must be logged in to update user account information")},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getUsername()}},{key:"render",value:function(){return o.a.createElement("form",{className:"account-form",onSubmit:this.handleSubmit},o.a.createElement("label",null,"Username:"),o.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),o.a.createElement("label",null,"Bio:"),o.a.createElement("input",{type:"text",name:"bio",value:this.state.bio,onChange:this.handleChange}),o.a.createElement("input",{type:"submit",value:"Update Account Info"}))}}]),n}(o.a.Component),We=Object(f.g)(Be),Je=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleScroll=function(){var e=document.body.scrollTop||document.documentElement.scrollTop,t=document.querySelector(".back-to-top-button");t.style.display=e>500?"block":"none"},e.scrollToTop=function(){document.body.scrollTop=0,document.documentElement.scrollTop=0},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"back-to-top-button",onClick:this.scrollToTop},"Back to Top"),o.a.createElement(We,null),o.a.createElement(xe,null))}}]),n}(o.a.Component),qe=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).fetchPosts=function(){fetch("".concat(j,"/interests/").concat(e.props.match.params.interest)).then((function(e){return e.json()})).then((function(t){e.props.getPosts(t)}))},e.handleScroll=function(){var e=document.body.scrollTop||document.documentElement.scrollTop,t=document.querySelector(".back-to-top-button");t.style.display=e>500?"block":"none"},e.scrollToTop=function(){document.body.scrollTop=0,document.documentElement.scrollTop=0},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.fetchPosts(),window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"back-to-top-button",onClick:this.scrollToTop},"Back to Top"),o.a.createElement(ce,{posts:this.props.posts,updatePosts:this.props.updatePosts}))}}]),n}(o.a.Component),Ve=Object(f.g)(Object(c.b)((function(e){return{posts:e.interestsReducer.posts}}),(function(e){return{getPosts:function(t){return e({type:"GET_INTERESTS_POSTS",posts:t})},updatePosts:function(t){return e({type:"UPDATE_INTERESTS_POSTS",post:t})}}}))(qe)),He=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).fetchPosts=function(){fetch("".concat(j,"/news_sources/").concat(e.props.match.params.newsSource)).then((function(e){return e.json()})).then((function(t){e.props.getPosts(t)}))},e.handleScroll=function(){var e=document.body.scrollTop||document.documentElement.scrollTop,t=document.querySelector(".back-to-top-button");t.style.display=e>500?"block":"none"},e.scrollToTop=function(){document.body.scrollTop=0,document.documentElement.scrollTop=0},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.fetchPosts(),window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"back-to-top-button",onClick:this.scrollToTop},"Back to Top"),o.a.createElement(ce,{posts:this.props.posts,updatePosts:this.props.updatePosts}))}}]),n}(o.a.Component),Xe=Object(f.g)(Object(c.b)((function(e){return{posts:e.newsSourcesReducer.posts}}),(function(e){return{getPosts:function(t){return e({type:"GET_NEWS_SOURCES_POSTS",posts:t})},updatePosts:function(t){return e({type:"UPDATE_NEWS_SOURCES_POSTS",post:t})}}}))(He)),Ye=function(e){return o.a.createElement("div",{className:"main-container"},o.a.createElement(f.d,null,o.a.createElement(f.b,{exact:!0,path:"/"},o.a.createElement(f.a,{to:"/home"})),o.a.createElement(f.b,{exact:!0,path:"/home",component:ue}),o.a.createElement(f.b,{exact:!0,path:"/tags",component:pe}),o.a.createElement(f.b,{exact:!0,path:"/messages",component:Oe}),o.a.createElement(f.b,{exact:!0,path:"/notifications",component:we}),o.a.createElement(f.b,{exact:!0,path:"/profile",component:Ce}),o.a.createElement(f.b,{exact:!0,path:"/profile/:username",component:Ie}),o.a.createElement(f.b,{exact:!0,path:"/login",component:Pe}),o.a.createElement(f.b,{exact:!0,path:"/signup",component:Me}),o.a.createElement(f.b,{exact:!0,path:"/update-profile",component:Je}),o.a.createElement(f.b,{exact:!0,path:"/interests/:interest",component:Ve}),o.a.createElement(f.b,{exact:!0,path:"/news-sources/:newsSource",component:Xe})))},$e=Object(c.b)((function(e){return{searchedUsers:e.searchedUsersReducer.searchedUsers}}),(function(e){return{getSearchedUsers:function(t){return e({type:"GET_SEARCHED_USERS",searchedUsers:t})}}}))((function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"search-form-container"},o.a.createElement("form",{className:"bulletin-form",onSubmit:function(t){return function(e,t){e.preventDefault();var n={user:{username:e.target.username.value}},a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};fetch("".concat(j,"/search-users"),a).then((function(e){return e.json()})).then((function(e){t.getSearchedUsers(e)})).catch((function(){return"Something went wrong"}))}(t,e)}},o.a.createElement("input",{type:"text",name:"username",placeholder:"Search users..."}),o.a.createElement("input",{type:"submit",value:"Search users..."}))))})),ze=function(e){return e.searchedUsers.map((function(t){return o.a.createElement(N.a,{button:!0,name:"username",key:t.username,onClick:function(t){return function(e,t){t.getSearchedUsers([]),t.history.push("/profile/".concat(e.target.textContent)),t.history.go(),document.querySelector("#search-users-form").reset()}(t,e)}},o.a.createElement(k.a,{primary:t.username}))}))},Ke=Object(f.g)(Object(c.b)(null,(function(e){return{getSearchedUsers:function(t){return e({type:"GET_SEARCHED_USERS",searchedUsers:t})}}}))((function(e){return o.a.createElement(o.a.Fragment,null,e.searchedUsers.length>0&&o.a.createElement("div",{className:"search-users-list"},o.a.createElement(C.a,null,ze(e))))}))),Qe=Object(c.b)((function(e){return{searchedUsers:e.searchedUsersReducer.searchedUsers}}))((function(e){return o.a.createElement("div",{className:"search-users-container"},o.a.createElement($e,null),o.a.createElement(Ke,{searchedUsers:e.searchedUsers}))})),Ze=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){localStorage.getItem("auth_token")?this.props.setLoggedIn(!0):this.props.setLoggedIn(!1)}},{key:"render",value:function(){return o.a.createElement(d.a,null,o.a.createElement(w,null),o.a.createElement("div",{className:"content-container"},o.a.createElement(p.a,{container:!0},o.a.createElement(p.a,{item:!0,xs:3},o.a.createElement(B,null)),o.a.createElement(p.a,{item:!0,xs:6},o.a.createElement(Ye,null)),o.a.createElement(p.a,{item:!0,xs:3},o.a.createElement(Qe,null)))))}}]),n}(o.a.Component),et=Object(c.b)(null,(function(e){return{setLoggedIn:function(t){return e({type:"SET_LOGGED_IN",loggedIn:t})}}}))(Ze);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var tt=n(61),nt=Object(tt.a)({badgesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{notifications:0,messages:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_BADGES":return Object(h.a)(Object(h.a)({},e),{},{notifications:t.notifications,messages:t.messages});case"SET_NOTIFICATIONS_READ":return Object(h.a)(Object(h.a)({},e),{},{notifications:0});case"SET_MESSAGES_BADGE_COUNT":return Object(h.a)(Object(h.a)({},e),{},{messages:t.messagesCount});default:return e}},loggedInReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loggedIn:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOGGED_IN":return Object(h.a)(Object(h.a)({},e),{},{loggedIn:t.loggedIn});default:return e}},conversationsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{username:"",conversations:[],openConversation:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CONVERSATIONS":return Object(h.a)(Object(h.a)({},e),{},{username:t.username,conversations:t.conversations});case"SET_OPEN_CONVERSATION":return Object(h.a)(Object(h.a)({},e),{},{openConversation:t.conversation});case"ADD_MESSAGE_TO_CONVERSATION":return Object(h.a)(Object(h.a)({},e),{},{conversations:e.conversations.map((function(e){return e.id===t.conversationId?Object(h.a)(Object(h.a)({},e),{},{messages:[].concat(Object(fe.a)(e.messages),[t.message])}):e}))});case"ADD_CONVERSATION":return Object(h.a)(Object(h.a)({},e),{},{conversations:[].concat(Object(fe.a)(e.conversations),[t.conversation])});case"UPDATE_CONVERSATION":return Object(h.a)(Object(h.a)({},e),{},{conversations:Object(fe.a)(e.conversations.map((function(e){return e.id===t.conversation.id?t.conversation:e})))});default:return e}},interestsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{posts:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_INTERESTS_POSTS":return{posts:t.posts};case"UPDATE_INTERESTS_POSTS":var n=Object(fe.a)(e.posts);return t.post.is_news_story?Object(h.a)(Object(h.a)({},e),{},{posts:n.map((function(e){return t.post.content===e.content&&t.post.title===e.title?t.post:e}))}):Object(h.a)(Object(h.a)({},e),{},{posts:n.map((function(e){return e.id===t.post.id?t.post:e}))});default:return e}},menuReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{interests:[],newsSources:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_INTERESTS_AND_NEWS_SOURCES":return Object(h.a)(Object(h.a)({},e),{},{interests:t.interests,newsSources:t.newsSources});default:return Object(h.a)({},e)}},newsSourcesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{posts:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_NEWS_SOURCES_POSTS":return{posts:t.posts};case"UPDATE_NEWS_SOURCES_POSTS":var n=Object(fe.a)(e.posts);return t.post.is_news_story?Object(h.a)(Object(h.a)({},e),{},{posts:n.map((function(e){return t.post.content===e.content&&t.post.title===e.title?t.post:e}))}):Object(h.a)(Object(h.a)({},e),{},{posts:n.map((function(e){return e.id===t.post.id?t.post:e}))});default:return e}},notificationsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{notifications:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_NOTIFICATIONS":return Object(h.a)(Object(h.a)({},e),{},{notifications:t.notifications});case"DELETE_NOTIFICATION":return Object(h.a)(Object(h.a)({},e),{},{notifications:Object(fe.a)(e.notifications).filter((function(e){return e.content!==t.notification_content}))});default:return Object(h.a)({},e)}},postsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{posts:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_POSTS":return Object(h.a)(Object(h.a)({},e),{},{posts:t.posts});case"CREATE_NEW_POST":var n=Object(fe.a)(e.posts);return n.unshift(t.post),Object(h.a)(Object(h.a)({},e),{},{posts:n});case"UPDATE_POSTS":var a=Object(fe.a)(e.posts);return t.post.is_news_story?Object(h.a)(Object(h.a)({},e),{},{posts:a.map((function(e){return t.post.content===e.content&&t.post.title===e.title?t.post:e}))}):Object(h.a)(Object(h.a)({},e),{},{posts:a.map((function(e){return e.id===t.post.id?t.post:e}))});default:return e}},searchedUsersReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{searchedUsers:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_SEARCHED_USERS":return Object(h.a)(Object(h.a)({},e),{},{searchedUsers:t.searchedUsers});default:return e}},signupReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sources:[],interests:[],selectedSources:[],selectedInterests:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SOURCES":return Object(h.a)(Object(h.a)({},e),{},{sources:t.sources});case"SET_INTERESTS":return Object(h.a)(Object(h.a)({},e),{},{interests:t.interests});case"ADD_SOURCE":return Object(h.a)(Object(h.a)({},e),{},{selectedSources:[].concat(Object(fe.a)(e.selectedSources),[t.source])});case"REMOVE_SOURCE":return Object(h.a)(Object(h.a)({},e),{},{selectedSources:Object(fe.a)(e.selectedSources).filter((function(e){return e!==t.source}))});case"ADD_INTEREST":return Object(h.a)(Object(h.a)({},e),{},{selectedInterests:[].concat(Object(fe.a)(e.selectedInterests),[t.interest])});case"REMOVE_INTEREST":return Object(h.a)(Object(h.a)({},e),{},{selectedInterests:Object(fe.a)(e.selectedInterests).filter((function(e){return e!==t.interest}))});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER":return Object(h.a)(Object(h.a)({},e),{},{user:t.user});case"UPDATE_FOLLOW":return Object(h.a)(Object(h.a)({},e),{},{user:Object(h.a)(Object(h.a)({},e.user),{},{following:t.following})});case"UPDATE_USER_POSTS":var n=Object(fe.a)(e.user.posts);return Object(h.a)(Object(h.a)({},e),{},{user:Object(h.a)(Object(h.a)({},e.user),{},{posts:n.map((function(e){return e.id===t.post.id?t.post:e}))})});default:return e}}}),at=Object(tt.b)(nt,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());s.a.render(o.a.createElement(c.a,{store:at},o.a.createElement(et,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[77,1,2]]]);
//# sourceMappingURL=main.d79e6e03.chunk.js.map